(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{407:function(t,e,n){var content=n(497);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("a06ed066",content,!0,{sourceMap:!1})},446:function(t,e,n){var content=n(499);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(17).default)("0d8fb6fb",content,!0,{sourceMap:!1})},496:function(t,e,n){"use strict";var r=n(407),l=n.n(r);n.d(e,"default",(function(){return l.a}))},497:function(t,e,n){(e=n(16)(!1)).push([t.i,".GraphLegend_1YH3V{padding:0!important;text-align:center;list-style:none}.GraphLegend_1YH3V li{display:inline-block;margin:0 3px}.GraphLegend_1YH3V li div{display:inline-block;width:40px;height:12px;margin:2px 4px;vertical-align:middle;border-style:solid;border-width:1px}.GraphLegend_1YH3V li button{color:#707070;font-size:1.2rem}",""]),e.locals={GraphLegend:"GraphLegend_1YH3V"},t.exports=e},498:function(t,e,n){"use strict";n(446)},499:function(t,e,n){(e=n(16)(!1)).push([t.i,"",""]),t.exports=e},537:function(t,e,n){"use strict";n.r(e);n(124);var r=n(5),l=n(165),o=n(349),d=n(348),c=(n(20),n(36),n(83),n(3)),f=n(100),h=n(12),y=n(0),m=n(344),x=n(346),k=n(350),v=n(345),L=n(351),C=n(125),D=n(372),w=n(362),_={created:function(){this.canvas=!0},components:{DataView:m.default,DataViewTable:k.default,DataViewDataSetPanel:x.default,ScrollableChart:L.default,OpenDataLink:v.default},props:{title:{type:String,default:""},titleId:{type:String,required:!1,default:"number-of-confirmed-cases"},infoTitles:{type:Array,required:!1,default:function(){return[]}},chartId:{type:String,default:"number-of-confirmed-cases-chart"},chartData:{type:Array,required:!1,default:function(){return[]}},getFormatter:{type:Function,required:!1,default:function(t){return Object(d.c)()}},date:{type:String,required:!0,default:""},url:{type:String,default:""},labels:{type:Array,default:function(){return[]}},dataLabels:{type:Array,default:function(){return[]}},tableLabels:{type:Array,default:function(){return[]}},unit:{type:String,default:""}},data:function(){return{displayLegends:[!0,!0],colors:[Object(w.a)("C"),Object(w.a)("E")],canvas:!0,yAxesBgPlugin:C.b}},computed:{displayInfo:function(){var t=Object(D.a)({displayData:this.displayData}),e=t.lastDay,n=t.lastDayData,r=t.dayBeforeRatio;return[{lText:n,sText:"".concat(this.$t("{date} の数値",{date:this.$d(e,"date")})),sTextUnder:"（".concat(this.$t("前日比"),": ").concat(r," ").concat(this.unit,"）"),unit:this.unit}]},displayData:function(){return{labels:this.labels,datasets:[{type:"bar",label:this.dataLabels[0],data:this.chartData[0],backgroundColor:this.colors[0].fillColor,borderColor:this.colors[0].strokeColor,borderWidth:1,order:3},{type:"line",label:this.dataLabels[1],data:this.chartData[1],pointBackgroundColor:"rgba(0,0,0,0)",pointBorderColor:"rgba(0,0,0,0)",borderColor:this.colors[1].fillColor,borderWidth:3,fill:!1,order:2,lineTension:0}]}},tableHeaders:function(){return[{text:this.$t("日付"),value:"text"}].concat(Object(f.a)(this.tableLabels.map((function(text,i){return{text:text,value:"".concat(i),align:"end"}}))))},tableData:function(){var t=this;return this.labels.map((function(label,i){return Object.assign.apply(Object,[{text:label}].concat(Object(f.a)(t.tableLabels.map((function(e,n){return Object(c.a)({},n,t.getFormatter(n)(t.chartData[n][i]))})))))})).sort((function(a,b){return Object(h.default)(a.text).unix()-Object(h.default)(b.text).unix()})).reverse()},displayOption:function(){var t=this,e=this.unit,n={tooltips:{displayColors:!1,callbacks:{label:function(n){var r=t.getFormatter(n.datasetIndex)(parseFloat(n.value));return"".concat(t.dataLabels[n.datasetIndex]," : ").concat(r," ").concat(e)},title:function(e,data){if(e[0].datasetIndex<2){var label=data.labels[e[0].index];return t.$d(new Date(label),"date")}return""}}},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{id:"day",stacked:!0,gridLines:{display:!1},ticks:{fontSize:9,maxTicksLimit:20,fontColor:"#808080",maxRotation:0,callback:function(label){return Object(h.default)(label).format("D")}}},{id:"month",stacked:!0,gridLines:{drawOnChartArea:!1,drawTicks:!0,drawBorder:!1,tickMarkLength:10},ticks:{fontSize:11,fontColor:"#808080",padding:3,fontStyle:"bold"},type:"time",time:{unit:"month",displayFormats:{month:"YYYY-MM"}}}],yAxes:[{position:"left",gridLines:{display:!0,drawOnChartArea:!0,color:"#E5E5E5"},ticks:{maxTicksLimit:8,fontColor:"#808080",suggestedMin:0,suggestedMax:this.scaledTicksYAxisMax}}]}};return"true"===this.$route.query.ogp&&Object.assign(n,{animation:{duration:0}}),n},displayDataHeader:function(){return{labels:["2020-01-01"],datasets:this.dataLabels.map((function(t){return{data:[],backgroundColor:"transparent",borderWidth:0}}))}},displayOptionHeader:function(){return{tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{id:"day",stacked:!0,gridLines:{display:!1},ticks:{fontSize:9,maxTicksLimit:20,fontColor:"transparent",maxRotation:0,callback:function(label){return Object(h.default)(label).format("D")}}},{id:"month",stacked:!0,gridLines:{drawOnChartArea:!1,drawTicks:!1,drawBorder:!1,tickMarkLength:10},ticks:{fontSize:11,fontColor:"transparent",padding:13,fontStyle:"bold"},type:"time",time:{unit:"month",displayFormats:{month:"YYYY-MM"}}}],yAxes:[{position:"left",gridLines:{display:!0,drawOnChartArea:!1,color:"#E5E5E5"},ticks:{maxTicksLimit:8,fontColor:"#808080",suggestedMin:0,suggestedMax:this.scaledTicksYAxisMax}}]},animation:{duration:0}}},scaledTicksYAxisMax:function(){return this.chartData.reduce((function(t,data){return Math.max.apply(Math,[t].concat(Object(f.a)(data)))}),0)}},methods:{onClickLegend:function(i){this.displayLegends[i]=!this.displayLegends[i],this.displayLegends=this.displayLegends.slice()},makeLineData:function(t){return this.chartData[0].map((function(e){return t}))}},mounted:function(){var canvas=this.$refs.barChart.$el.querySelector("canvas"),t="".concat(this.titleId,"-graph");canvas&&(canvas.setAttribute("role","img"),canvas.setAttribute("aria-labelledby",t))}},O=y.a.extend(_),T=n(496),A=n(6);var component=Object(A.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-view",{attrs:{title:t.title,"title-id":t.titleId,date:t.date,"head-title":t.title},scopedSlots:t._u([{key:"additionalDescription",fn:function(){return[t._t("additionalDescription")]},proxy:!0},{key:"dataTable",fn:function(){return[n("client-only",[n("data-view-table",{attrs:{headers:t.tableHeaders,items:t.tableData}})],1)]},proxy:!0},{key:"dataSetPanel",fn:function(){return[n("data-view-data-set-panel",{attrs:{title:t.infoTitles[0],"l-text":t.displayInfo[0].lText,"s-text":t.displayInfo[0].sText,"s-text-under":t.displayInfo[0].sTextUnder,unit:t.displayInfo[0].unit}})]},proxy:!0},{key:"footer",fn:function(){return[n("open-data-link",{directives:[{name:"show",rawName:"v-show",value:t.url,expression:"url"}],attrs:{url:t.url}})]},proxy:!0}],null,!0)},[n("ul",{class:t.$style.GraphLegend,style:{display:t.canvas?"block":"none"}},t._l(t.dataLabels,(function(e,i){return n("li",{key:i,on:{click:function(e){return t.onClickLegend(i)}}},[n("button",[n("div",1===i?{style:{background:t.colors[i].fillColor,border:0,height:"3px"}}:{style:{backgroundColor:t.colors[i].fillColor,borderColor:t.colors[i].strokeColor}}),t._v(" "),n("span",{style:{textDecoration:t.displayLegends[i]?"none":"line-through"}},[t._v(t._s(e))])])])})),0),t._v(" "),n("h4",{staticClass:"visually-hidden",attrs:{id:t.titleId+"-graph"}},[t._v("\n    "+t._s(t.$t("{title}のグラフ",{title:t.title}))+"\n  ")]),t._v(" "),n("scrollable-chart",{directives:[{name:"show",rawName:"v-show",value:t.canvas,expression:"canvas"}],attrs:{"display-data":t.displayData},scopedSlots:t._u([{key:"chart",fn:function(e){var r=e.chartWidth;return[n("bar",{ref:"barChart",attrs:{"chart-id":t.chartId,"chart-data":t.displayData,options:t.displayOption,"display-legends":t.displayLegends,height:240,width:r}})]}},{key:"sticky-chart",fn:function(){return[n("bar",{staticClass:"sticky-legend",attrs:{"chart-id":t.chartId+"-header-right","chart-data":t.displayDataHeader,options:t.displayOptionHeader,plugins:t.yAxesBgPlugin,"display-legends":t.displayLegends,height:240}})]},proxy:!0}])})],1)}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null),$=component.exports;installComponents(component,{ScrollableChart:n(351).default,DataViewTable:n(350).default,DataViewDataSetPanel:n(346).default,OpenDataLink:n(345).default,DataView:n(344).default});var j={components:{TimeBarChart:$},data:function(){for(var t=Object(o.a)(l.patients_summary.data),e=l.patients_summary.date,n=t.reduce((function(t,data){return t[0].push(data.transition),t[1].push(data.label),t}),[[],[],[]]),c=Object(r.a)(n,2),f=c[0],h=c[1],y=[],i=0;i<t.length;i++)i<7?y.push(t[i].cumulative/(i+1)):y.push((t[i].cumulative-t[i-7].cumulative)/7);return{chartData:[f,y],date:e,dataLabels:[this.$t("陽性者数"),this.$t("7日間移動平均")],tableLabels:[this.$t("陽性者数"),this.$t("7日間移動平均")],labels:h,getFormatter:function(t){return 1===t?Object(d.b)(1):Object(d.c)()}}}},S=(n(498),n(32)),M=n.n(S),Y=n(526),I=Object(A.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-col",{staticClass:"DataCard",attrs:{cols:"12",md:"6"}},[n("client-only",[n("time-bar-chart",{attrs:{title:t.$t("報告日別による陽性者数の推移"),"title-id":"number-of-confirmed-cases","chart-id":"time-bar-chart-patients","chart-data":t.chartData,date:t.date,unit:t.$t("人"),labels:t.labels,"data-labels":t.dataLabels,"table-labels":t.tableLabels,"get-formatter":t.getFormatter,url:"https://opendata.a01sa01to.com/covid19_ibaraki/positive_number"},scopedSlots:t._u([{key:"description",fn:function(){return[n("ul",[n("li",[t._v("\n            "+t._s(t.$t("保健所から発生届が提出された日を基準とする"))+"\n          ")]),t._v(" "),n("li",[t._v("\n            "+t._s(t.$t("医療機関等が行った検査も含む"))+"\n          ")]),t._v(" "),n("li",[t._v("\n            "+t._s(t.$t("チャーター機帰国者、クルーズ船乗客等は含まれていない"))+"\n          ")])])]},proxy:!0}])})],1)],1)}),[],!1,null,"8d2985e6",null);e.default=I.exports;M()(I,{TimeBarChart:n(347).default}),M()(I,{VCol:Y.a})}}]);